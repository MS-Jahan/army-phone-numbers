<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="/manifest.json" />
  <title>সেনাপ্রহরী</title>
</head>

<body>
  <div id="root" style="width: 100%;"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>
<script>
  if ("serviceWorker" in navigator) {
    if (navigator.serviceWorker.controller) {
      console.log("An active service worker found, no need to register");
    } else {
      // Register the service worker
      navigator.serviceWorker
        .register("/pwabuilder-sw.js", {
          scope: "/"
        })
        .then(function (reg) {
          console.log("Service worker has been registered for scope: " + reg.scope);
        });
    }
  }
</script>

<script type="module">
  (async () => {
    try {
      // Check for navigator.permissions.query() availability
      if ('permissions' in navigator && typeof navigator.permissions.query === 'function') {
        const permissionStatus = await navigator.permissions.query({ name: 'geolocation' });
        console.log('Geolocation permission status is:', permissionStatus.state);
        // Handle the permission status if needed
        // Now that the environment is confirmed to have the required features, proceed with the import
        const module = await import('/pwaupdate.js?url');
        
        // Create and append the custom element
        const el = document.createElement('pwa-update');
          document.body.appendChild(el);
        } else {
          console.warn('navigator.permissions.query() is not available in this environment.');
          // Fallback or alternative code
        }
    } catch (e) {
      console.error('An error occurred:', e);
    }
  })();
</script>




<!-- <script>
  window.replainSettings = { id: 'cb3ce02a-b6ef-46db-9ed9-64da41250262' };
  (function (u) {
    var s = document.createElement('script'); s.async = true; s.src = u;
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
  })('https://widget.replain.cc/dist/client.js');
</script> -->

</html>
